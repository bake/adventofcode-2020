package main

import (
	"strings"
	"testing"
)

func TestApply(t *testing.T) {
	tt := []struct {
		address string
		mask    mask
		result  string
	}{
		{
			address: "000000000000000000000000000000101010",
			mask:    "000000000000000000000000000000X1001X",
			result: "000000000000000000000000000000011010\n" +
				"000000000000000000000000000000011011\n" +
				"000000000000000000000000000000111010\n" +
				"000000000000000000000000000000111011",
		},
		{
			address: "000000000000000000000000000000011010",
			mask:    "00000000000000000000000000000000X0XX",
			result: "000000000000000000000000000000010000\n" +
				"000000000000000000000000000000010001\n" +
				"000000000000000000000000000000010010\n" +
				"000000000000000000000000000000010011\n" +
				"000000000000000000000000000000011000\n" +
				"000000000000000000000000000000011001\n" +
				"000000000000000000000000000000011010\n" +
				"000000000000000000000000000000011011",
		},
	}
	for _, tc := range tt {
		addresses := tc.mask.apply(tc.address)
		result := strings.Join(addresses, "\n")
		if tc.result != result {
			t.Fatalf("expected %q to result in \n%s,\ngot\n%s", tc.mask, tc.result, result)
		}
	}
}
